<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario EgitoNCRP - Oficial</title>
    <style>
        :root { 
            --cor-primaria: #c5a059; 
            --cor-erro: #f04747; 
            --cor-sucesso: #43b581; 
            --cor-fundo-card: rgba(15, 15, 15, 0.96); 
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('https://i.imgur.com/8QzXyFp.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            padding: 20px 0;
        }

        .container { 
            background: var(--cor-fundo-card); 
            padding: 35px; 
            border-radius: 15px; 
            border: 2px solid var(--cor-primaria); 
            box-shadow: 0 0 30px rgba(197, 160, 89, 0.2); 
            width: 500px; 
            text-align: center; 
            backdrop-filter: blur(10px); 
        }

        h2 { color: var(--cor-primaria); text-transform: uppercase; letter-spacing: 3px; margin: 10px 0; }
        
        input, select { 
            width: 100%; 
            padding: 12px; 
            margin: 8px 0; 
            border-radius: 6px; 
            border: 1px solid #333; 
            background: rgba(45, 45, 45, 0.9); 
            color: white; 
            box-sizing: border-box; 
            outline: none;
        }

        .label-pergunta {
            text-align: left;
            display: block;
            font-size: 0.85rem;
            color: var(--cor-primaria);
            margin-top: 5px;
        }

        .campo-foto {
            background: rgba(197, 160, 89, 0.05);
            border: 1px dashed var(--cor-primaria);
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            cursor: pointer;
        }

        button { 
            width: 100%; 
            padding: 15px; 
            background: var(--cor-primaria); 
            border: none; 
            color: #000; 
            font-weight: bold; 
            text-transform: uppercase;
            cursor: pointer; 
            border-radius: 6px; 
            transition: 0.4s; 
            margin-top: 15px; 
        }

        button:hover { background: #fff; transform: translateY(-2px); }

        #timer { font-size: 40px; color: var(--cor-erro); font-weight: bold; margin-bottom: 10px; }
        .hidden { display: none; }
        .stats { display: flex; justify-content: space-around; margin-bottom: 20px; color: var(--cor-primaria); font-weight: bold; }
        
        #opcoes button {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #444;
            color: white;
            text-align: left;
            margin-top: 8px;
            font-weight: normal;
        }

        #preview-img { width: 100%; max-height: 150px; object-fit: contain; margin-top: 10px; display: none; border: 1px solid var(--cor-primaria); }
        #btn-adm-trigger { position: fixed; bottom: 15px; right: 15px; background: none; border: none; color: rgba(255,255,255,0.1); cursor: pointer; }
    </style>
</head>
<body>

<div id="tela-cadastro" class="container">
    <img src="https://i.imgur.com/8QzXyFp.jpg" alt="Logo" style="width: 90px; height: 90px; border-radius: 50%; border: 2px solid var(--cor-primaria); object-fit: cover;">
    <h2>Egitoncrp</h2>
    <p style="font-size: 0.8rem; opacity: 0.7;">RECRUTAMENTO OFICIAL</p>
    
    <input type="text" id="discordID" placeholder="ID do Discord (Num√©rico)">
    <input type="text" id="nick" placeholder="Nome Completo In-game">
    <input type="number" id="passaporte" placeholder="ID / Passaporte">
    <input type="number" id="level" placeholder="Level na Cidade">
    <input type="number" id="idade" placeholder="Idade (Vida Real)">
    <input type="text" id="tempoNC" placeholder="Tempo na Nova Capital (Ex: 6 meses)">
    <input type="text" id="tempoRP" placeholder="Tempo de RP (Ex: 1 ano)">

    <span class="label-pergunta">Est√° em alguma Stoplist?</span>
    <select id="stoplist">
        <option value="N√£o">N√£o</option>
        <option value="Sim">Sim</option>
    </select>

    <span class="label-pergunta">Ciente das obriga√ß√µes ao ser aprovado?</span>
    <select id="obrigacoes">
        <option value="Sim">Sim, estou ciente</option>
        <option value="N√£o">N√£o</option>
    </select>

    <div class="campo-foto" onclick="document.getElementById('foto-esc').click()">
        <label class="upload-label" id="label-foto">üì∏ CLIQUE PARA ANEXAR PRINT DO ESC</label>
        <input type="file" id="foto-esc" accept="image/*" onchange="previewFile(event)">
        <img id="preview-img" src="" alt="Preview">
    </div>

    <button onclick="iniciarProcesso()">Iniciar Prova (25 Quest√µes)</button>
</div>

<div id="tela-quiz" class="container hidden">
    <div id="timer">30</div>
    <div class="stats">
        <span>Quest√£o: <span id="num-pergunta">1</span>/25</span>
        <span>Erros: <span id="cont-erros">0</span>/3</span>
    </div>
    <div class="pergunta-card">
        <h3 id="pergunta-texto">...</h3>
        <div id="opcoes"></div>
    </div>
</div>

<div id="tela-resultado" class="container hidden">
    <h1 id="titulo-final">Processando...</h1>
    <p id="subtitulo-final">Enviando dados para a Tropa...</p>
    <button onclick="window.location.reload()">Sair do Sistema</button>
</div>

<script>
    const WEBHOOK_PADRAO = "https://discord.com/api/webhooks/1461406807506423878/gTeh2vqbDMeM1VAWeuTfRZNOgpuFPKjU06dIbA02f0W7pkAUKQ2NlZJo01IkdrOzRaYZ";

    let config = {
        webhook: localStorage.getItem('egito_webhook') || WEBHOOK_PADRAO,
        errosParaReprovar: 3,
        tempoPorPergunta: 30
    };

    const perguntas = [
        { q: "O que √© VDM?", options: ["Matar com armas", "Atropelar sem motivo de RP", "Bater carro"], correct: 1 },
        { q: "O que √© RDM?", options: ["Matar sem motivo de RP", "Roubar carro", "Sair do jogo"], correct: 0 },
        { q: "O que √© MetaGaming?", options: ["Usar info de fora (Discord) no jogo", "Fazer live", "Falar no r√°dio"], correct: 0 },
        { q: "O que √© PowerGaming?", options: ["A√ß√µes imposs√≠veis na vida real", "Ter muito dinheiro", "Ser o melhor atirador"], correct: 0 },
        { q: "O que √© Fear RP?", options: ["Sentir medo de altura", "Valorizar a vida do personagem", "Correr da pol√≠cia"], correct: 1 },
        { q: "O que √© Combat Logging?", options: ["Quitar em a√ß√£o/abordagem", "Entrar em combate", "Trocar arma"], correct: 0 },
        { q: "Pode reconhecer mascarado?", options: ["Sim, pela voz", "N√£o, √© proibido", "Pelo ID"], correct: 1 },
        { q: "O que √© Safe Zone?", options: ["Zona de tiro", "Zona onde crime √© proibido", "√Årea de venda"], correct: 1 },
        { q: "Significado de OOC?", options: ["Out of Character (Vida Real)", "Online On Chat", "Ordem de Crime"], correct: 0 },
        { q: "Significado de IC?", options: ["In Character (Dentro do Personagem)", "I am Cop", "Info Comum"], correct: 0 },
        { q: "O que √© Revenge Kill?", options: ["Matar quem te matou ap√≥s voc√™ renascer", "Vingar amigo", "Matar bandido"], correct: 0 },
        { q: "Rendido por 2 armados, o que faz?", options: ["Reage", "Segue as ordens (Fear RP)", "Corre"], correct: 1 },
        { q: "O que √© Flood?", options: ["Nadar", "Repetir mensagens no chat", "Usar r√°dio"], correct: 1 },
        { q: "Pode usar 'E' em a√ß√£o de tiro?", options: ["Sim", "N√£o, deve esperar acabar", "Se n√£o tiver m√©dico"], correct: 1 },
        { q: "O que √© Car Jacking?", options: ["Roubar carro sem motivo de RP", "Pintar carro", "Trancar"], correct: 0 },
        { q: "O que √© Dark RP?", options: ["RP √† noite", "RP de temas pesados/proibidos", "RP de bandido"], correct: 1 },
        { q: "Pode fazer RP de sequestro em Safe Zone?", options: ["Sim", "N√£o", "Apenas com ADM"], correct: 1 },
        { q: "O que √© Bunny Hop?", options: ["Correr e pular para ser mais r√°pido", "Comprar coelho", "Esconder"], correct: 0 },
        { q: "O que √© Assalto Fake?", options: ["Assaltar amigo para treinar", "Simular assalto para atrair pol√≠cia/alvos", "Usar arma de brinquedo"], correct: 1 },
        { q: "Se o seu carro capotar em persegui√ß√£o, voc√™:", options: ["Descapota e segue", "Interpreta o acidente/ferimentos", "Sai correndo"], correct: 1 },
        { q: "O que √© Safe Loot?", options: ["Roubar em zona segura", "Roubar itens de jogadores sem motivo de RP", "Guardar itens no ba√∫"], correct: 1 },
        { q: "O que √© Ghost RP?", options: ["RP de fantasma", "Interagir com quem n√£o est√° vendo ou presente", "Ficar invis√≠vel"], correct: 1 },
        { q: "Pode dar 'TP' para fugir de a√ß√£o?", options: ["Sim", "N√£o, √© banimento", "Se estiver bugado"], correct: 1 },
        { q: "O que √© Drive-By?", options: ["Atirar de dentro do ve√≠culo", "Dirigir perto", "Lavar o carro"], correct: 0 },
        { q: "Qual a regra principal do Amor √† Vida?", options: ["Nunca morrer", "Sempre agir como se sua vida fosse √∫nica", "Ter muitos rem√©dios"], correct: 1 }
    ];

    let indiceAtual = 0, erros = 0, tempoRestante = config.tempoPorPergunta, intervalo;
    let dadosCandidato = {}, historico = [], fotoArquivo = null;

    function previewFile(event) {
        fotoArquivo = event.target.files[0];
        const preview = document.getElementById('preview-img');
        if (fotoArquivo) {
            const reader = new FileReader();
            reader.onload = e => {
                preview.src = e.target.result;
                preview.style.display = "block";
                document.getElementById('label-foto').innerText = "‚úÖ PRINT SELECIONADO";
            };
            reader.readAsDataURL(fotoArquivo);
        }
    }

    function iniciarProcesso() {
        dadosCandidato = {
            discord: document.getElementById('discordID').value,
            nick: document.getElementById('nick').value,
            pass: document.getElementById('passaporte').value,
            level: document.getElementById('level').value,
            idade: document.getElementById('idade').value,
            tempoNC: document.getElementById('tempoNC').value,
            tempoRP: document.getElementById('tempoRP').value,
            stoplist: document.getElementById('stoplist').value,
            obrigacoes: document.getElementById('obrigacoes').value
        };

        if (!dadosCandidato.discord || !dadosCandidato.nick || !fotoArquivo) {
            return alert("Preencha todos os campos e anexe o Print!");
        }

        document.getElementById('tela-cadastro').classList.add('hidden');
        document.getElementById('tela-quiz').classList.remove('hidden');
        mostrarPergunta();
    }

    function mostrarPergunta() {
        if (indiceAtual >= perguntas.length) return finalizar(true);
        document.getElementById('num-pergunta').innerText = indiceAtual + 1;
        clearInterval(intervalo);
        tempoRestante = config.tempoPorPergunta;
        document.getElementById('timer').innerText = tempoRestante;

        const p = perguntas[indiceAtual];
        document.getElementById('pergunta-texto').innerText = p.q;
        const btnContainer = document.getElementById('opcoes');
        btnContainer.innerHTML = "";

        p.options.forEach((opt, i) => {
            const b = document.createElement('button');
            b.innerText = opt;
            b.onclick = () => {
                if (i !== p.correct) {
                    historico.push(`‚ùå ${p.q}`);
                    erros++;
                    document.getElementById('cont-erros').innerText = erros;
                    if (erros >= config.errosParaReprovar) return finalizar(false);
                } else {
                    historico.push(`‚úÖ ${p.q}`);
                }
                indiceAtual++;
                mostrarPergunta();
            };
            btnContainer.appendChild(b);
        });

        intervalo = setInterval(() => {
            tempoRestante--;
            document.getElementById('timer').innerText = tempoRestante;
            if (tempoRestante <= 0) {
                historico.push(`‚è∞ ${p.q} (Tempo)`);
                erros++;
                if (erros >= config.errosParaReprovar) finalizar(false);
                else { indiceAtual++; mostrarPergunta(); }
            }
        }, 1000);
    }

    function finalizar(passou) {
        clearInterval(intervalo);
        document.getElementById('tela-quiz').classList.add('hidden');
        document.getElementById('tela-resultado').classList.remove('hidden');
        const status = passou ? "APROVADO" : "REPROVADO";
        document.getElementById('titulo-final').innerText = status === "APROVADO" ? "‚úÖ ENVIADO" : "‚ùå REPROVADO";
        enviarParaDiscord(status);
    }

    async function enviarParaDiscord(status) {
        const formData = new FormData();
        formData.append('file', fotoArquivo, 'print_esc.png');

        const embed = {
            title: "üî± NOVO RECRUTAMENTO - TROPA DO EGITO üá™üá¨",
            description: `**RESULTADO DAS QUEST√ïES:**\n${historico.join('\n')}`,
            color: status === "APROVADO" ? 4437377 : 15749431,
            fields: [
                { name: "üë§ Candidato", value: `**Nick:** ${dadosCandidato.nick}\n**Pass:** ${dadosCandidato.pass}\n**Level:** ${dadosCandidato.level}\n**Discord:** <@${dadosCandidato.discord}>`, inline: true },
                { name: "üìã Info Pessoal", value: `**Idade:** ${dadosCandidato.idade}\n**Tempo NC:** ${dadosCandidato.tempoNC}\n**Tempo RP:** ${dadosCandidato.tempoRP}`, inline: true },
                { name: "‚ö†Ô∏è Verifica√ß√µes", value: `**Stoplist?** ${dadosCandidato.stoplist}\n**Ciente Obriga√ß√µes?** ${dadosCandidato.obrigacoes}`, inline: false },
                { name: "üìä Prova", value: `**Status:** \`${status}\`\n**Erros:** ${erros}/3`, inline: false }
            ],
            image: { url: 'attachment://print_esc.png' },
            footer: { text: "EgitoNCRP ‚Ä¢ " + new Date().toLocaleString() }
        };

        formData.append('payload_json', JSON.stringify({ embeds: [embed] }));
        await fetch(config.webhook, { method: 'POST', body: formData });
    }
</script>
</body>
</html>
